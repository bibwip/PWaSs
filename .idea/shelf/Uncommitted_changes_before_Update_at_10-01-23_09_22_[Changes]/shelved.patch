Index: app/src/main/java/com/thethreewisemen/pwass/firestore/firestoreHelper.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.thethreewisemen.pwass.firestore\n\nimport android.util.Log\nimport com.google.firebase.firestore.ktx.firestore\nimport com.google.firebase.ktx.Firebase\nimport com.thethreewisemen.pwass.adapters.CommentsAdapter\nimport com.thethreewisemen.pwass.objects.Comment\nimport com.thethreewisemen.pwass.objects.CommentSection\nimport com.thethreewisemen.pwass.objects.Post\nimport kotlinx.coroutines.launch\nimport kotlinx.coroutines.runBlocking\n\nconst val TAG = \"FIRESTORE\"\nconst val postsCol = \"Posts\"\nconst val comSecCol = \"CommentSection\"\n\nfun uploadPost(post: Post)  {\n    val db = Firebase.firestore\n    db.collection(postsCol).add(post).addOnSuccessListener {\n        Log.d(TAG, \"Post geupload: \\nid= ${post.id}\\ntitel=${post.titel}\\nuser=${post.naam_poster}\")\n    }.addOnFailureListener {\n        Log.d(\n            TAG, \"Post niet geupload: : \\n\" +\n                    \"id= ${post.id}\\n\" +\n                    \"titel=${post.titel}\\n\" +\n                    \"user=${post.naam_poster}\"\n        )\n    }\n}\n\nfun getPosts(adapter : Any){\n    val posts = arrayListOf<Post>()\n    val query = Firebase.firestore.collection(postsCol)\n    query.get().addOnSuccessListener { snapshot ->\n        for (doc in snapshot) {\n            posts.add(doc.toObject(Post::class.java))\n        }\n        //adapter.updateItems(posts)\n        //TODO dit fixen\n    }.addOnFailureListener {\n        Log.d(TAG, \"failed getting all posts\")\n    }\n}\n\nfun getComments(section : CommentSection, adapter: CommentsAdapter) = runBlocking{\n    launch {\n        val db = Firebase.firestore\n        section.comments.clear()\n        db.collection(\"CommentSection\").document(section.id)\n            .collection(\"comments\").get()\n            .addOnSuccessListener {  snapshot ->\n                for (item in snapshot) {\n                    val comment = item.toObject(Comment::class.java)\n                    comment.sectionId = section.id\n                    comment.fireId = item.id\n                    getChild(comment, section, arrayListOf())\n                    section.comments.add(comment)\n                }\n                adapter.updateItems(section.comments)\n            }\n            .addOnFailureListener {\n                Log.d(TAG, \"failed getting comments: ${it.message}\")\n            }\n        Log.d(TAG, \"updated items: ${section.comments}\")\n\n    }\n}\n\nprivate fun getChild(comment: Comment, section: CommentSection , index : ArrayList<Int>)  {\n    for ((count, com) in comment.child.withIndex()) {\n        if  (comment.fireId == \"\") {\n            com.parent = comment.parent\n        } else {\n            com.parent = comment.fireId\n        }\n        com.childid = index.clone() as ArrayList<Int>\n        com.childid.add(count)\n        com.sectionId = section.id\n        if (com.child.isNotEmpty()) {\n            getChild(com, section, com.childid)\n        }\n    }\n}\n\nfun uploadComment(comment: Comment, comSec : CommentSection, parent : Comment?) {\n    val db = Firebase.firestore\n    if (parent != null){\n        if (parent.parent != null) {\n            for (com in comSec.comments) {\n                Log.d(TAG, com.fireId + \" == \" + parent.parent)\n                if (com.fireId == parent.parent) {\n                    uploadChildComment(parent.childid, comment, com, comSec.id )\n                    db.collection(comSecCol).document(comSec.id).collection(\"comments\").document(com.fireId).set(com)\n                    Log.d(TAG, \"uploaded comment: $com\")\n                }\n            }\n        } else {\n            for (com in comSec.comments) {\n                Log.d(TAG, com.fireId + \" == \" + parent.fireId)\n                if (com.fireId == parent.fireId) {\n                    com.child.add(comment)\n                    db.collection(comSecCol).document(comSec.id).collection(\"comments\").document(parent.fireId).set(com)\n                    Log.d(TAG, \"uploaded comment: $com\")\n                }\n            }\n        }\n\n    } else {\n        db.collection(comSecCol).document(comSec.id).collection(\"comments\").add(comment)\n        Log.d(TAG, \"uploaded paren comment: $comment\")\n    }\n}\n\nprivate fun uploadChildComment(indexs: ArrayList<Int>, comment: Comment, parent: Comment, comSecId: String) {\n    Log.d(TAG, indexs.toString())\n    if (indexs.isNotEmpty()){\n        val index = indexs[0]\n        indexs.removeAt(0)\n        uploadChildComment(indexs, comment, parent.child[index], comSecId)\n    } else {\n        parent.child.add(comment)\n    }\n\n\n}\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/thethreewisemen/pwass/firestore/firestoreHelper.kt b/app/src/main/java/com/thethreewisemen/pwass/firestore/firestoreHelper.kt
--- a/app/src/main/java/com/thethreewisemen/pwass/firestore/firestoreHelper.kt	(revision 00d5635d8d40bd52f7233908713fb87e58342279)
+++ b/app/src/main/java/com/thethreewisemen/pwass/firestore/firestoreHelper.kt	(date 1673338559347)
@@ -4,6 +4,7 @@
 import com.google.firebase.firestore.ktx.firestore
 import com.google.firebase.ktx.Firebase
 import com.thethreewisemen.pwass.adapters.CommentsAdapter
+import com.thethreewisemen.pwass.adapters.RecyclerAdapter
 import com.thethreewisemen.pwass.objects.Comment
 import com.thethreewisemen.pwass.objects.CommentSection
 import com.thethreewisemen.pwass.objects.Post
@@ -28,15 +29,14 @@
     }
 }
 
-fun getPosts(adapter : Any){
+fun getPosts(adapter : RecyclerAdapter){
     val posts = arrayListOf<Post>()
     val query = Firebase.firestore.collection(postsCol)
     query.get().addOnSuccessListener { snapshot ->
         for (doc in snapshot) {
             posts.add(doc.toObject(Post::class.java))
         }
-        //adapter.updateItems(posts)
-        //TODO dit fixen
+        adapter.updateItems(posts)
     }.addOnFailureListener {
         Log.d(TAG, "failed getting all posts")
     }
Index: app/src/main/java/com/thethreewisemen/pwass/fragments/MainFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.thethreewisemen.pwass.fragments\n\nimport android.os.Bundle\nimport androidx.fragment.app.Fragment\nimport android.view.View\nimport androidx.recyclerview.widget.LinearLayoutManager\nimport androidx.recyclerview.widget.RecyclerView\nimport com.thethreewisemen.pwass.R\nimport com.thethreewisemen.pwass.adapters.RecyclerAdapter\nimport com.thethreewisemen.pwass.objects.Post\n\nclass MainFragment : Fragment(R.layout.fragment_main) {\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        val postList = arrayListOf(\n            Post(\"test\", \"deze autist heeft hulp nodig\", \"HELP! ik krijg een autistische aanval\", \"autist420\"),\n            Post(\"test dos\", \"deze autist heeft hulp nodig\", \"HELP! ik krijg een autistische aanval\", \"autist420\"),\n            Post(\"test tre\", \"deze autist heeft hulp nodig\", \"HELP! ik krijg een autistische aanval\", \"autist420\"),\n            Post(\"test 4\", \"deze autist heeft hulp nodig\", \"HELP! ik krijg een autistische aanval\", \"autist420\"),\n            Post(\"test V\", \"deze autist heeft hulp nodig\", \"HELP! ik krijg een autistische aanval\", \"autist420\"),\n            Post(\"test seis\", \"deze autist heeft hulp nodig\", \"HELP! ik krijg een autistische aanval\", \"autist420\"),\n            Post(\"test kleven\", \"deze autist heeft hulp nodig\", \"HELP! ik krijg een autistische aanval\", \"autist420\"),\n            Post(\"test gat\", \"deze autist heeft hulp nodig\", \"HELP! ik krijg een autistische aanval\", \"autist420\")\n        )\n\n        val adapter = RecyclerAdapter(postList)\n        val recycler = view.findViewById<RecyclerView>(R.id.recyclerPosts)\n        recycler.layoutManager = LinearLayoutManager(context)\n        recycler.adapter = adapter\n\n\n\n\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/thethreewisemen/pwass/fragments/MainFragment.kt b/app/src/main/java/com/thethreewisemen/pwass/fragments/MainFragment.kt
--- a/app/src/main/java/com/thethreewisemen/pwass/fragments/MainFragment.kt	(revision 00d5635d8d40bd52f7233908713fb87e58342279)
+++ b/app/src/main/java/com/thethreewisemen/pwass/fragments/MainFragment.kt	(date 1673338559367)
@@ -7,6 +7,7 @@
 import androidx.recyclerview.widget.RecyclerView
 import com.thethreewisemen.pwass.R
 import com.thethreewisemen.pwass.adapters.RecyclerAdapter
+import com.thethreewisemen.pwass.firestore.getPosts
 import com.thethreewisemen.pwass.objects.Post
 
 class MainFragment : Fragment(R.layout.fragment_main) {
@@ -28,6 +29,7 @@
         val recycler = view.findViewById<RecyclerView>(R.id.recyclerPosts)
         recycler.layoutManager = LinearLayoutManager(context)
         recycler.adapter = adapter
+        getPosts(adapter)
 
 
 
Index: app/src/main/java/com/thethreewisemen/pwass/adapters/RecyclerAdapter.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.thethreewisemen.pwass.adapters\n\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.TextView\nimport androidx.recyclerview.widget.RecyclerView\nimport com.thethreewisemen.pwass.R\nimport com.thethreewisemen.pwass.objects.Post\n\nclass RecyclerAdapter (\n    var posts: ArrayList<Post>\n    ) : RecyclerView.Adapter<RecyclerAdapter.PostViewHolder>() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): PostViewHolder {\n        val view = LayoutInflater.from(parent.context).inflate(R.layout.post_item, parent, false)\n        return PostViewHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: PostViewHolder, position: Int) {\n        holder.title.text = posts[position].titel\n        holder.name.text = posts[position].naam_poster\n        holder.beschrijving.text = posts[position].beschrijving\n    }\n\n    override fun getItemCount(): Int {\n        return posts.size\n    }\n\n    inner class PostViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        val title : TextView = itemView.findViewById(R.id.postItemTitle)\n        val name : TextView = itemView.findViewById(R.id.postItemUserName)\n        val beschrijving : TextView = itemView.findViewById(R.id.postItemBeschrijving)\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/thethreewisemen/pwass/adapters/RecyclerAdapter.kt b/app/src/main/java/com/thethreewisemen/pwass/adapters/RecyclerAdapter.kt
--- a/app/src/main/java/com/thethreewisemen/pwass/adapters/RecyclerAdapter.kt	(revision 00d5635d8d40bd52f7233908713fb87e58342279)
+++ b/app/src/main/java/com/thethreewisemen/pwass/adapters/RecyclerAdapter.kt	(date 1673338559379)
@@ -27,6 +27,11 @@
         return posts.size
     }
 
+    fun updateItems(items : ArrayList<Post>) {
+        posts = items
+        notifyDataSetChanged()
+    }
+
     inner class PostViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {
         val title : TextView = itemView.findViewById(R.id.postItemTitle)
         val name : TextView = itemView.findViewById(R.id.postItemUserName)
Index: app/src/main/res/navigation/nav_graph.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/nav_graph\"\n    app:startDestination=\"@id/mainFragment\">\n\n    <fragment\n        android:id=\"@+id/welcomeFragment\"\n        android:name=\"com.thethreewisemen.pwass.fragments.WelcomeFragment\"\n        android:label=\"fragment_welcome\"\n        tools:layout=\"@layout/fragment_welcome\" >\n        <action\n            android:id=\"@+id/action_welcomeFragment_to_volgendeFrag\"\n            app:destination=\"@id/volgendeFrag\" />\n    </fragment>\n    <fragment\n        android:id=\"@+id/volgendeFrag\"\n        android:name=\"com.thethreewisemen.pwass.fragments.VolgendeFrag\"\n        android:label=\"fragment_volgende\"\n        tools:layout=\"@layout/fragment_volgende\" />\n    <fragment\n        android:id=\"@+id/settingsFragment\"\n        android:name=\"com.thethreewisemen.pwass.fragments.SettingsFragment\"\n        android:label=\"SettingsFragment\" />\n    <fragment\n        android:id=\"@+id/mainFragment\"\n        android:name=\"com.thethreewisemen.pwass.fragments.MainFragment\"\n        android:label=\"fragment_main\"\n        tools:layout=\"@layout/fragment_main\" />\n</navigation>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/navigation/nav_graph.xml b/app/src/main/res/navigation/nav_graph.xml
--- a/app/src/main/res/navigation/nav_graph.xml	(revision 00d5635d8d40bd52f7233908713fb87e58342279)
+++ b/app/src/main/res/navigation/nav_graph.xml	(date 1673338680591)
@@ -3,7 +3,7 @@
     xmlns:app="http://schemas.android.com/apk/res-auto"
     xmlns:tools="http://schemas.android.com/tools"
     android:id="@+id/nav_graph"
-    app:startDestination="@id/mainFragment">
+    app:startDestination="@id/settingsFragment">
 
     <fragment
         android:id="@+id/welcomeFragment"
Index: app/src/main/res/menu/menu_main.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/menu/menu_main.xml b/app/src/main/res/menu/menu_main.xml
new file mode 100644
--- /dev/null	(date 1673338920367)
+++ b/app/src/main/res/menu/menu_main.xml	(date 1673338920367)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<menu xmlns:android="http://schemas.android.com/apk/res/android">
+    <item
+        android:id="@+id/actionSettings"
+        android:title="@string/settings"
+</menu>
\ No newline at end of file
